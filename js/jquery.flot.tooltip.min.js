!function(t){var o=function(t){this.tooltips={},this.init(t)};o.prototype.init=function(o){var i=this;function e(t){var o={};o.x=t.pageX,o.y=t.pageY,i.updateTooltipPosition(o)}function s(t,o,e){if(e){if(i.tooltips.stickyTooltip&&i.tooltips.stickyTooltip.item){const t=e.datapoint[0],o=e.datapoint[1],s=i.tooltips.stickyTooltip.item.datapoint[0],p=i.tooltips.stickyTooltip.item.datapoint[1];if(t===s&&o===p)return void l("hoverTooltip")}const t=i.getDomElement("hoverTooltip");i.attachTooltipToBody(t);const{tipPosition:s}=i.tooltips.hoverTooltip,p=i.stringFormat(i.tooltipOptions.content,e);t.html(p),i.updateTooltipPosition({x:o.pageX,y:o.pageY}),t.css({left:s.x+i.tooltipOptions.shifts.x,top:s.y+i.tooltipOptions.shifts.y}).show(),"function"==typeof i.tooltipOptions.onHover&&i.tooltipOptions.onHover(e,t)}else l("hoverTooltip")}function p(t,o,e){if(i.tooltipOptions.stickyable)if(e){if(i.tooltips.stickyTooltip&&i.tooltips.stickyTooltip.item){const t=e.datapoint[0],o=e.datapoint[1],s=i.tooltips.stickyTooltip.item.datapoint[0],p=i.tooltips.stickyTooltip.item.datapoint[1];if(t===s&&o===p){const t=i.getDomElement("stickyTooltip");t.removeClass(i.tooltipOptions.stickyClass),i.plot.unhighlight(e.seriesIndex,e.dataIndex);const o=i.getDomElement("hoverTooltip");return i.tooltips.hoverTooltip.node=t,delete i.tooltips.stickyTooltip,void("function"==typeof i.tooltipOptions.onClick&&i.tooltipOptions.onClick.call(i.plot,e,o,!1))}l("stickyTooltip")}i.tooltips.hoverTooltip||s(0,o,e),i.tooltips.stickyTooltip=i.tooltips.hoverTooltip,i.tooltips.stickyTooltip.item=e,delete i.tooltips.hoverTooltip,window.setTimeout(()=>{i.plot.highlight(e.seriesIndex,e.dataIndex)},0);const t=i.tooltips.stickyTooltip.node;t.addClass(i.tooltipOptions.stickyClass),"function"==typeof i.tooltipOptions.onClick&&i.tooltipOptions.onClick.call(i.plot,e,t,!0)}else{l("stickyTooltip");const t=i.getDomElement("stickyTooltip");t.removeClass(i.tooltipOptions.stickyClass),"function"==typeof i.tooltipOptions.onClick&&i.tooltipOptions.onClick.call(i.plot,e,t,!1)}i.lastClickTimeStamp=t.timeStamp}function l(t){const o=i.getDomElement(t);if(i.detachTooltipFromBody(o),"stickyTooltip"===t){const t=i.tooltips.stickyTooltip.item;t&&i.plot.unhighlight(t.seriesIndex,t.dataIndex)}delete i.tooltips[t]}i.$placeholder=o.getPlaceholder(),i.plot=o,o.hooks.bindEvents.push((function(o,l){i.plotOptions=o.getOptions(),!1!==i.plotOptions.tooltip&&void 0!==i.plotOptions.tooltip&&(i.tooltipOptions=i.plotOptions.tooltipOpts,t(o.getPlaceholder()).bind("plothover",s),i.tooltipOptions.stickyable&&t(o.getPlaceholder()).bind("plotclick",p),t(l).bind("mousemove",e))})),o.hooks.shutdown.push((function(o,l){t(o.getPlaceholder()).unbind("plothover",s),t(o.getPlaceholder()).unbind("plotclick",p),i.tooltips.hoverTooltip&&i.tooltips.hoverTooltip.node&&(i.tooltips.hoverTooltip.node.remove(),delete i.tooltips.hoverTooltip),i.tooltips.stickyTooltip&&i.tooltips.stickyTooltip.node&&(i.tooltips.stickyTooltip.node.remove(),delete i.tooltips.stickyTooltip),t(l).unbind("mousemove",e)})),i.plot.plotTooltip={hideTooltip:l}},o.prototype.makeTooltipNode=function(){const o=t("<div />").attr("class","flotTip");return o.data("plot",this.plot),this.tooltipOptions.defaultTheme&&o.css({background:"#fff","z-index":"100",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"}),o},o.prototype.attachTooltipToBody=function(o){let i=t("#flotTips");0===i.length&&(i=t("<div />").attr("id","flotTips").appendTo("body")),o.appendTo(i).hide().css({position:"absolute"})},o.prototype.detachTooltipFromBody=function(o){0!==t("#flotTips").length&&o.detach()},o.prototype.getDomElement=function(t){const o=this;let i;return o.tooltips[t]?i=o.tooltips[t].node:(i=o.makeTooltipNode(t),o.tooltips[t]={tipPosition:{},node:i}),i},o.prototype.updateTooltipPosition=function(o){if(0!==Object.keys(this.tooltips).length){var i=this.getDomElement("hoverTooltip"),e=i.outerWidth()+this.tooltipOptions.shifts.x,s=i.outerHeight()+this.tooltipOptions.shifts.y;o.x-t(window).scrollLeft()>t(window).innerWidth()-e&&(o.x-=e),o.y-t(window).scrollTop()>t(window).innerHeight()-s&&(o.y-=s),this.tooltips.hoverTooltip.tipPosition.x=o.x,this.tooltips.hoverTooltip.tipPosition.y=o.y}},o.prototype.stringFormat=function(t,o){var i=/%x\.{0,1}(?:\d{0,})/,e=/%y\.{0,1}(?:\d{0,})/,s=o.datapoint[0],p=o.datapoint[1];return"function"==typeof t&&(t=t(o.series.label,s,p,o,this.plot)),void 0!==o.series.percent&&(t=this.adjustValPrecision(/%p\.{0,1}(\d{0,})/,t,o.series.percent)),void 0!==o.series.label&&(t=t.replace(/%s/,o.series.label)),this.isTimeMode("xaxis",o)&&this.isXDateFormat(o)&&(t=t.replace(i,this.timestampToDate(s,this.tooltipOptions.xDateFormat))),this.isTimeMode("yaxis",o)&&this.isYDateFormat(o)&&(t=t.replace(e,this.timestampToDate(p,this.tooltipOptions.yDateFormat))),"number"==typeof s&&(t=this.adjustValPrecision(i,t,s)),"number"==typeof p&&(t=this.adjustValPrecision(e,t,p)),void 0!==o.series.xaxis.tickFormatter&&(t=t.replace(i,o.series.xaxis.tickFormatter(s,o.series.xaxis))),void 0!==o.series.yaxis.tickFormatter&&(t=t.replace(e,o.series.yaxis.tickFormatter(p,o.series.yaxis))),t},o.prototype.isTimeMode=function(t,o){return void 0!==o.series[t].options.mode&&"time"===o.series[t].options.mode},o.prototype.isXDateFormat=function(t){return void 0!==this.tooltipOptions.xDateFormat&&null!==this.tooltipOptions.xDateFormat},o.prototype.isYDateFormat=function(t){return void 0!==this.tooltipOptions.yDateFormat&&null!==this.tooltipOptions.yDateFormat},o.prototype.timestampToDate=function(o,i){var e=new Date(o);return t.plot.formatDate(e,i)},o.prototype.adjustValPrecision=function(t,o,i){var e;return null!==o.match(t)&&""!==RegExp.$1&&(e=RegExp.$1,i=i.toFixed(e),o=o.replace(t,i)),o};t.plot.plugins.push({init:function(t){new o(t)},options:{tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,shifts:{x:10,y:20},defaultTheme:!0,stickyable:!1,stickyClass:"flotTipSticky",onHover:function(t,o){},onClick:function(t,o,i){}}},name:"tooltip",version:"0.6.1"})}(jQuery);